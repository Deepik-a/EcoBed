



<body>
    <!-- Sidebar Start -->
  <div class="container-fluid pt-4 px-4">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-md-3">
        <div class="sidebar pe-4 pb-3 bg-light">
          <nav class="navbar navbar-light">
            <a href="index.html" class="navbar-brand mx-4 mb-3">
              <h3 class="text-primary">
                <i class="fa fa-hashtag me-2"></i>Dashboard
              </h3>
            </a>
            <div class="d-flex align-items-center ms-4 mb-4">
              <div class="position-relative">
                <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
              </div>
              <div class="ms-3">
                <h6 class="mb-0">DEEPIKA PS</h6>
                <span>Admin</span>
              </div>
            </div>
            <div class="navbar-nav w-100">
              <a href="index.html" class="nav-item nav-link active">
                <i class="fa fa-tachometer-alt me-2"></i>Dashboard
              </a>
              <div class="nav-item">
                <a href="#" class="nav-link dropdown-toggle">
                  <i class="fa fa-laptop me-2"></i>Sales Report
                </a>
              </div>
  
              <!-- Category Section with Toggle -->
              <div class="nav-item">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#CategoryMenu" id="categoryMenuLink">
                  <i class="fa fa-keyboard me-2"></i>Category
                </a>
                <div id="CategoryMenu" class="collapse">
                  <ul class="navbar-nav ps-3">
                    <li class="nav-item">
                      <a href="/admin/addCategory" class="nav-link">
                        <i class="fa fa-plus me-2"></i>Add Category
                      </a>
                    </li>
                    <li class="nav-item">
                      <a href="/admin/editCategory" class="nav-link">
                        <i class="fa fa-list me-2"></i>Category List
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="nav-item">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#productMenu" id="productMenuLink">
                    <i class="fa fa-keyboard me-2"></i>Products
                </a>
                <div id="productMenu" class="collapse">
                    <ul class="navbar-nav ps-3">
                        <li class="nav-item">
                            <a href="/admin/addProduct" class="nav-link">
                                <i class="fa fa-plus me-2"></i>Add Product
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/editProduct" class="nav-link">
                                <i class="fa fa-list me-2"></i>Product List
                            </a>
                        </li>
                    </ul>
                </div>
                </div>
  
              <a href="/admin/users" class="nav-item nav-link">
                <i class="fa fa-table me-2"></i>Customers
              </a>
              <a href="/admin/coupons" class="nav-item nav-link">
                <i class="fa fa-chart-bar me-2"></i>Coupons
              </a>
              <a href="/admin/orders" class="nav-item nav-link">
                <i class="fa fa-chart-bar me-2"></i>Orders
              </a>
              <a href="chart.html" class="nav-item nav-link">
                <i class="fa fa-chart-bar me-2"></i>Popups
              </a>
              <a href="logout" class="nav-item nav-link">
                <i class="fa fa-sign-out-alt me-2"></i>Logout
              </a>
            </div>
          </nav>
        </div>
      </div>
  
  
      <!-- Content Start -->
  <div class="content">
  
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
        <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
            <h2 class="text-primary mb-0"><i class="fa fa-hashtag"></i></h2>
        </a>
        <a href="#" class="sidebar-toggler flex-shrink-0">
            <i class="fa fa-bars"></i>
        </a>
        
        <div class="navbar-nav align-items-center ms-auto">
           
        
        
            <div class="nav-item dropdown">
                <a href="#" class="nav-link">
                
                    <span class="d-none d-lg-inline-flex">Deepika </span>
                </a>
                <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                    <a href="#" class="dropdown-item">My Profile</a>
                    <!-- <a href="#" class="dropdown-item">Settings</a> -->
                    <a href="#" class="dropdown-item">Log Out</a>
                </div>
            </div>
        </div>
    </nav>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

<!-- DataTables JS and Bootstrap integration -->
<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>

<!-- DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css">

<!-- Custom CSS for table styling -->
<style>
    .table {
        background-color: #f8f9fa; /* Light background for better contrast */
    }
    .table th {
        background-color: #007bff; /* Blue header background */
        color: white; /* White text color for header */
    }
    .table td {
        vertical-align: middle; /* Center align the content */
    }
    .action-buttons {
        display: flex;
        flex-direction: column;
        gap: 5px; /* Space between buttons */
    }
    .action-buttons button {
        width: 100%; /* Make buttons full width */
    }
</style>

<div class="row header" style="text-align:center;color:green">
    <h3>Order Management</h3>
</div>

<table id="example" class="table table-striped" style="width:100%">
    <thead>
        <tr>
            <th>Order ID</th>
            <th>User</th>
            <th>Items</th>
            <th>Count</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <% orders.forEach(order => { %>
            <tr>
                <td><%= order._id %></td>
                <td><%= order.userId.name %></td>
                <td>
                    <% order.items.forEach(item => { %>
                        <div><%= item.productId.name %></div>
                    <% }) %>
                </td>
                <td>
                    <% order.items.forEach(item => { %>
                        <div><%= item.productCount %></div>
                    <% }) %>
                </td>
                <td><%= order.status %></td>
                <td>
                    <div class="action-buttons">
                        <!-- Form for changing order status -->
                        <form action="/admin/orders/status" method="POST">
                            <input type="hidden" name="orderId" value="<%= order._id %>">
                            <select name="status" class="form-select">
                                <option value="Pending" <%= order.status === 'Pending' ? 'selected' : '' %>>Pending</option>
                                <option value="Shipped" <%= order.status === 'Shipped' ? 'selected' : '' %>>Shipped</option>
                                <option value="Confirmed" <%= order.status === 'Confirmed' ? 'selected' : '' %>>Confirmed</option>
                                <option value="Delivered" <%= order.status === 'Delivered' ? 'selected' : '' %>>Delivered</option>
                                <option value="Cancelled" <%= order.status === 'Cancelled' ? 'selected' : '' %>>Cancelled</option>
                                <option value="Returned" <%= order.status === 'Returned' ? 'selected' : '' %>>Returned</option>
                            </select>
                            <button type="submit" class="btn btn-primary mt-2">Update</button>
                        </form>

                        <!-- Form for canceling the order -->
                        <form action="/admin/orders/cancel" method="POST">
                            <input type="hidden" name="orderId" value="<%= order._id %>">
                            <button type="submit" class="btn btn-danger mt-2" <%= order.status === 'Cancelled' ? 'disabled' : '' %>>Cancel Order</button>
                        </form>
                    </div>
                </td>
            </tr>
        <% }) %>
    </tbody>
  
</table>
